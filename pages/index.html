<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>產品頁面</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div id="app">
      <div class="container p-4">
        <div class="row">
          <div class="col-md-6">
            <div class="d-flex align-items-center">
              <h1 class="fs-2 me-5">產品列表</h1>
              <button
                type="button"
                class="btn btn-success m-0 p-1"
                @click="openModal('new')"
              >
                新增商品
              </button>
            </div>

            <table class="table table-hover">
              <thead class="table-success">
                <tr>
                  <th scope="col">產品名稱</th>
                  <th scope="col">原價</th>
                  <th scope="col">售價</th>
                  <th scope="col">是否啟用</th>
                  <th scope="col">查看細節</th>
                  <th scope="col">編輯</th>
                </tr>
              </thead>
              <tbody>
                <!-- v-for 渲染表格 -->
                <tr v-for="item in products">
                  <td>{{ item.title }}</td>
                  <td>{{ item.origin_price }}</td>
                  <td>{{ item.price }}</td>
                  <td>
                    <span v-if="item.is_enabled >= 1" class="text-success"
                      >啟用</span
                    ><span v-else class="text-danger">未啟用</span>
                  </td>
                  <td>
                    <button
                      type="button"
                      class="btn btn-success"
                      @click="tempProduct = item"
                    >
                      查看細節
                    </button>
                  </td>
                  <td>
                    <div
                      class="btn-group"
                      role="group"
                      aria-label="Basic mixed styles example"
                    >
                      <button type="button" class="btn btn-outline-success">
                        編輯
                      </button>
                      <button type="button" class="btn btn-outline-danger">
                        刪除
                      </button>
                    </div>
                  </td>
                </tr>
              </tbody>
              <caption>
                {{ `目前有 ${products.length} 項商品` }}
              </caption>
            </table>
          </div>
          <div class="col-md-6">
            <h2>產品細節</h2>
            <!-- 如果有點查看細節，temp 會有資料，會顯示此區塊 -->
            <div v-if="tempProduct.title">
              <div class="card mb-3">
                <img
                  :src="tempProduct.imageUrl"
                  class="card-img-top cardImg object-fit-cover object-position-center"
                  :alt="tempProduct.title"
                />
                <div class="card-body">
                  <h5 class="card-title">
                    {{ tempProduct.title }}
                    <span class="fs-6 text-white bg-success rounded-2 ms-2 p-1"
                      >{{ tempProduct.category }}</span
                    >
                  </h5>
                  <p class="card-text">
                    商品描述：{{ tempProduct.description }}
                  </p>
                  <p class="card-text">商品內容：{{ tempProduct.content }}</p>
                  <p class="card-text">
                    商品價格：{{ tempProduct.price }}<span
                      class="text-secondary text-decoration-line-through ms-2"
                      >{{ tempProduct.origin_price }}</span
                    >
                    / 個
                  </p>
                </div>
              </div>
              <span
                v-for="(image, id) in tempProduct.imagesUrl"
                :key="'image' + id"
              >
                <!-- 用 v-if 讓小圖片如果沒有 imageUrl 就藏起來 -->
                <img
                  v-if="image"
                  :src="image"
                  :alt="tempProduct.title + id"
                  class="productImg object-fit-cover object-position-center rounded-5 p-2"
              /></span>
            </div>
            <div v-else class="text-secondary">請選擇一項商品</div>
          </div>
        </div>
      </div>

      <!-- Modal -->
      <div
        class="modal fade"
        id="productModal"
        ref="productModal"
        tabindex="-1"
        aria-labelledby="productModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="ProductModalLabel">新增商品</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="col-6">
                  <div class="mb-3">
                    <label for="productTitle" class="form-label">標題</label>
                    <input
                      type="text"
                      class="form-control"
                      id="productTitle"
                      placeholder="請輸入商品標題"
                      v-model="tempProduct.title"
                    />
                  </div>
                </div>
                <div class="col-6">
                  <div class="mb-3">
                    <label for="productCategory" class="form-label">分類</label>
                    <input
                      type="text"
                      class="form-control"
                      id="productCategory"
                      placeholder="請輸入商品分類"
                      v-model="tempProduct.category"
                    />
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-4">
                  <div class="mb-3">
                    <label for="productOriginPrice" class="form-label"
                      >原價</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="productOriginPrice"
                      min="10"
                    />
                  </div>
                </div>
                <div class="col-4">
                  <div class="mb-3">
                    <label for="productPrice" class="form-label">售價</label>
                    <input
                      type="number"
                      class="form-control"
                      id="productPrice"
                      min="10"
                    />
                  </div>
                </div>
                <div class="col-4">
                  <div class="mb-3">
                    <label for="productUnit" class="form-label">單位</label>
                    <input type="text" class="form-control" id="productUnit" />
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label for="producrDescription" class="form-label"
                  >商品描述</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="producrDescription"
                />
              </div>
              <div class="mb-3">
                <label for="productContent" class="form-label">商品內容</label>
                <input type="text" class="form-control" id="productContent" />
              </div>
              <div class="mb-3">
                <label for="productMainImage" class="form-label"
                  >主圖網址</label
                >
                <input type="url" class="form-control" id="productMainImage" />
              </div>
              <div class="mb-3">
                <label for="productImage1" class="form-label">小圖網址 1</label>
                <input type="url" class="form-control" id="productImage1" />
              </div>
              <div class="mb-3">
                <label for="productImage2" class="form-label">小圖網址 2</label>
                <input type="url" class="form-control" id="productImage2" />
              </div>
              <div class="mb-3">
                <label for="productImage3" class="form-label">小圖網址 3</label>
                <input type="url" class="form-control" id="productImage3" />
              </div>
              <div class="mb-3">
                <label for="productImage4" class="form-label">小圖網址 4</label>
                <input type="url" class="form-control" id="productImage4" />
              </div>
              <div class="mb-3">
                <label for="productImage5" class="form-label">小圖網址 5</label>
                <input type="url" class="form-control" id="productImage5" />
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                取消新增
              </button>
              <button type="button" class="btn btn-success">確定新增</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="../main.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>

    <!-- 不加入會出現 bootstrap undefined 錯誤，但明明已經有npm install bs5 了，不知道為何還會出錯 -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <script type="module" src="../assets/js/index.js"></script>
  </body>
</html>
